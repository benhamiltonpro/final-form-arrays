!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self)["final-form-arrays"]={})}(this,function(e){"use strict";function h(){return(h=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(e[f]=r[f])}return e}).apply(this,arguments)}function p(e,n,r,f){f(e,n.name,r),delete e.fields[n.name],e.fields[r]=h({},n,{name:r,change:n.change,blur:n.blur,focus:n.focus,lastFieldState:void 0}),e.fields[r].change||delete e.fields[r].change,e.fields[r].blur||delete e.fields[r].blur,e.fields[r].focus||delete e.fields[r].focus}function g(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(e,i,n){var t=e[0],c=e[1],r=e[2],f=n.changeValue,l=(n.resetFieldState,n.renameField);f(i,t,function(e){var n=[].concat(e||[]);return n.splice(c,0,r),n});var a=h({},i.fields),s=new RegExp("^"+g(t)+"\\[(\\d+)\\](.*)");Object.keys(i.fields).sort().reverse().forEach(function(e){var n=s.exec(e);if(n){var r=Number(n[1]);if(c<=r){var f=t+"["+(r+1)+"]"+n[2];p(i,a[e],f,l)}}})}function o(f,i,t,c,l){Object.keys(c.fields).forEach(function(e){if(e.substring(0,i.length)===i){var n=e.substring(i.length),r=f+"["+t+"]"+n;p(c,c.fields[e],r,l)}})}function d(n,r){Object.keys(n.fields).forEach(function(e){n.fields[e]=h({},n.fields[e],{change:n.fields[e].change||r.fields[e]&&r.fields[e].change,blur:n.fields[e].blur||r.fields[e]&&r.fields[e].blur,focus:n.fields[e].focus||r.fields[e]&&r.fields[e].focus}),n.fields[e].change||delete n.fields[e].change,n.fields[e].blur||delete n.fields[e].blur,n.fields[e].focus||delete n.fields[e].focus})}function i(e,c,n){var r,l=e[0],a=e[1],f=n.changeValue,s=n.renameField,u=n.getIn,o=n.setIn;f(c,l,function(e){var n=[].concat(e||[]);return r=n[a],n.splice(a,1),n});var d=new RegExp("^"+g(l)+"\\[(\\d+)\\](.*)"),v=h({},c,{fields:h({},c.fields)});return Object.keys(c.fields).forEach(function(e){var n=d.exec(e);if(n){var r=Number(n[1]);if(r===a){if(delete c.fields[e],e===l+"["+a+"]"){var f="formState.submitErrors."+l,i=u(c,f);Array.isArray(i)&&(i.splice(a,1),c=o(c,f,i))}}else if(a<r){delete c.fields[e];var t=l+"["+(r-1)+"]"+n[2];v.fields[t]?p(c,v.fields[e],t,s):s(c,e,t)}}}),r}var n={insert:t,concat:function(e,n,r){var f=e[0],i=e[1];(0,r.changeValue)(n,f,function(e){return e?[].concat(e,i):i})},move:function(e,n,r){var f=e[0],i=e[1],t=e[2],c=r.changeValue,l=r.renameField;if(i!==t){c(n,f,function(e){var n=[].concat(e||[]),r=n[i];return n.splice(i,1),n.splice(t,0,r),n});var a=h({},n,{fields:h({},n.fields)});if(o(f,f+"["+i+"]","tmp",n,l),i<t)for(var s=i+1;s<=t;s++){o(f,f+"["+s+"]",""+(s-1),n,l)}else for(var u=i-1;t<=u;u--){o(f,f+"["+u+"]",""+(u+1),n,l)}o(f,f+"[tmp]",t,n,l),d(n,a)}},pop:function(e,n,r){var f,i,t=e[0];if((0,r.changeValue)(n,t,function(e){if(e)return e.length?(i=e.length-1,f=e[i],e.slice(0,i)):[]}),void 0!==i){var c=new RegExp("^"+g(t)+"\\["+i+"].*");Object.keys(n.fields).forEach(function(e){c.test(e)&&delete n.fields[e]})}return f},push:function(e,n,r){var f=e[0],i=e[1];(0,r.changeValue)(n,f,function(e){return e?[].concat(e,[i]):[i]})},remove:i,removeBatch:function(e,i,n){var t=e[0],c=e[1],r=n.changeValue,l=n.renameField,a=[].concat(c);a.sort();for(var f=0;f<a.length;f++)0<f&&a[f]===a[f-1]&&a.splice(f--,1);var s=[];r(i,t,function(n){if(s=c.map(function(e){return n&&n[e]}),!n||!a.length)return n;var r=[].concat(n),f=[];return a.forEach(function(e){r.splice(e-f.length,1),f.push(n&&n[e])}),r});var u=new RegExp("^"+g(t)+"\\[(\\d+)\\](.*)"),o=h({},i,{fields:{}});return Object.keys(i.fields).forEach(function(e){var n=u.exec(e);if(n){var r=Number(n[1]);if(!~a.indexOf(r)){var f=t+"["+(r-function(e,r){return e.reduce(function(e,n){return n<r?e+1:e},0)}(a,r))+"]"+n[2];p(o,i.fields[e],f,l)}}else o.fields[e]=i.fields[e]}),i.fields=o.fields,s},shift:function(e,n,r){var f=e[0];return i([f,0],n,r)},swap:function(e,n,r){var f=e[0],i=e[1],t=e[2],c=r.changeValue,l=r.renameField;if(i!==t){c(n,f,function(e){var n=[].concat(e||[]),r=n[i];return n[i]=n[t],n[t]=r,n});var a=h({},n,{fields:h({},n.fields)}),s=f+"["+t+"]",u=f+"[tmp]";o(f,f+"["+i+"]","tmp",n,l),o(f,s,i,n,l),o(f,u,t,n,l),d(n,a)}},unshift:function(e,n,r){var f=e[0],i=e[1];return t([f,0,i],n,r)},update:function(e,n,r){var f=e[0],i=e[1],t=e[2];(0,r.changeValue)(n,f,function(e){var n=[].concat(e||[]);return n.splice(i,1,t),n})}};e.default=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=final-form-arrays.umd.min.js.map
