!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self)["final-form-arrays"]={})}(this,function(e){"use strict";function h(){return(h=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function g(e,n,r,i){i(e,n.name,r),delete e.fields[n.name],e.fields[r]=h({},n,{name:r,change:n.change,blur:n.blur,focus:n.focus,lastFieldState:void 0}),e.fields[r].change||delete e.fields[r].change,e.fields[r].blur||delete e.fields[r].blur,e.fields[r].focus||delete e.fields[r].focus}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(e,f,n){var t=e[0],c=e[1],r=e[2],i=n.changeValue,l=(n.resetFieldState,n.renameField);i(f,t,function(e){var n=[].concat(e||[]);return n.splice(c,0,r),n});var a=h({},f.fields),s=new RegExp("^"+p(t)+"\\[(\\d+)\\](.*)");Object.keys(f.fields).sort().reverse().forEach(function(e){var n=s.exec(e);if(n){var r=Number(n[1]);if(c<=r){var i=t+"["+(r+1)+"]"+n[2];g(f,a[e],i,l)}}})}function v(i,f,t,c,l){Object.keys(c.fields).forEach(function(e){if(e.substring(0,f.length)===f){var n=e.substring(f.length),r=i+"["+t+"]"+n;g(c,c.fields[e],r,l)}})}function b(n,r){Object.keys(n.fields).forEach(function(e){n.fields[e]=h({},n.fields[e],{change:n.fields[e].change||r.fields[e]&&r.fields[e].change,blur:n.fields[e].blur||r.fields[e]&&r.fields[e].blur,focus:n.fields[e].focus||r.fields[e]&&r.fields[e].focus}),n.fields[e].change||delete n.fields[e].change,n.fields[e].blur||delete n.fields[e].blur,n.fields[e].focus||delete n.fields[e].focus})}function f(e,c,n){var r,l=e[0],a=e[1],i=n.changeValue,s=n.renameField,u=n.getIn,o=n.setIn;i(c,l,function(e){var n=[].concat(e||[]);return r=n[a],n.splice(a,1),n});var d=new RegExp("^"+p(l)+"\\[(\\d+)\\](.*)"),v=h({},c,{fields:h({},c.fields)});return Object.keys(c.fields).forEach(function(e){var n=d.exec(e);if(n){var r=Number(n[1]);if(r===a){if(delete c.fields[e],e===l+"["+a+"]"){var i="formState.submitErrors."+l,f=u(c,i);Array.isArray(f)&&(f.splice(a,1),c=o(c,i,f))}}else if(a<r){delete c.fields[e];var t=l+"["+(r-1)+"]"+n[2];v.fields[t]?g(c,v.fields[e],t,s):s(c,e,t)}}}),r}var n={insert:t,concat:function(e,n,r){var i=e[0],f=e[1];(0,r.changeValue)(n,i,function(e){return e?[].concat(e,f):f})},move:function(e,n,r){var i=e[0],f=e[1],t=e[2],c=r.changeValue,l=r.renameField;if(f!==t){c(n,i,function(e){var n=[].concat(e||[]),r=n[f];return n.splice(f,1),n.splice(t,0,r),n});var a=h({},n,{fields:h({},n.fields)}),s=i+"["+f+"]",u=(Object.keys(n.fields).length+1).toString();if(v(i,s,u,n,l),f<t)for(var o=f+1;o<=t;o++){v(i,i+"["+o+"]",""+(o-1),n,l)}else for(var d=f-1;t<=d;d--){v(i,i+"["+d+"]",""+(d+1),n,l)}v(i,i+"["+u+"]",t,n,l),b(n,a)}},pop:function(e,n,r){var i,f,t=e[0];if((0,r.changeValue)(n,t,function(e){if(e)return e.length?(f=e.length-1,i=e[f],e.slice(0,f)):[]}),void 0!==f){var c=new RegExp("^"+p(t)+"\\["+f+"].*");Object.keys(n.fields).forEach(function(e){c.test(e)&&delete n.fields[e]})}return i},push:function(e,n,r){var i=e[0],f=e[1];(0,r.changeValue)(n,i,function(e){return e?[].concat(e,[f]):[f]})},remove:f,removeBatch:function(e,f,n){var t=e[0],c=e[1],r=n.changeValue,l=n.renameField,a=[].concat(c);a.sort();for(var i=0;i<a.length;i++)0<i&&a[i]===a[i-1]&&a.splice(i--,1);var s=[];r(f,t,function(n){if(s=c.map(function(e){return n&&n[e]}),!n||!a.length)return n;var r=[].concat(n),i=[];return a.forEach(function(e){r.splice(e-i.length,1),i.push(n&&n[e])}),r});var u=new RegExp("^"+p(t)+"\\[(\\d+)\\](.*)"),o=h({},f,{fields:{}});return Object.keys(f.fields).forEach(function(e){var n=u.exec(e);if(n){var r=Number(n[1]);if(!~a.indexOf(r)){var i=t+"["+(r-function(e,r){return e.reduce(function(e,n){return n<r?e+1:e},0)}(a,r))+"]"+n[2];g(o,f.fields[e],i,l)}}else o.fields[e]=f.fields[e]}),f.fields=o.fields,s},shift:function(e,n,r){var i=e[0];return f([i,0],n,r)},swap:function(e,n,r){var i=e[0],f=e[1],t=e[2],c=r.changeValue,l=r.renameField;if(f!==t){c(n,i,function(e){var n=[].concat(e||[]),r=n[f];return n[f]=n[t],n[t]=r,n});var a=h({},n,{fields:h({},n.fields)}),s=i+"["+t+"]",u=i+"[tmp]";v(i,i+"["+f+"]","tmp",n,l),v(i,s,f,n,l),v(i,u,t,n,l),b(n,a)}},unshift:function(e,n,r){var i=e[0],f=e[1];return t([i,0,f],n,r)},update:function(e,n,r){var i=e[0],f=e[1],t=e[2];(0,r.changeValue)(n,i,function(e){var n=[].concat(e||[]);return n.splice(f,1,t),n})}};e.default=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=final-form-arrays.umd.min.js.map
